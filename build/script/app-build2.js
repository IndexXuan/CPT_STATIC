/*! 
  Project  Name: cpt-static-for-mobile 
  Last Modified: 2014-11-19
*/
var gmu=gmu||{version:"@version",$:window.Zepto,staticCall:function($){var proto=$.fn,slice=[].slice,instance=$();return instance.length=1,function(item,fn){return instance[0]=item,proto[fn].apply(instance,slice.call(arguments,2))}}(Zepto)};
!function(gmu,$){function eachEvent(events,callback,iterator){(events||"").split(separator).forEach(function(type){iterator(type,callback)})}function matcherFor(ns){return new RegExp("(?:^| )"+ns.replace(" "," .* ?")+"(?: |$)")}function parse(name){var parts=(""+name).split(".");return{e:parts[0],ns:parts.slice(1).sort().join(" ")}}function findHandlers(arr,name,callback,context){var matcher,obj;return obj=parse(name),obj.ns&&(matcher=matcherFor(obj.ns)),arr.filter(function(handler){return!(!handler||obj.e&&handler.e!==obj.e||obj.ns&&!matcher.test(handler.ns)||callback&&handler.cb!==callback&&handler.cb._cb!==callback||context&&handler.ctx!==context)})}function Event(type,props){return this instanceof Event?(props&&$.extend(this,props),this.type=type,this):new Event(type,props)}var slice=[].slice,separator=/\s+/,returnFalse=function(){return!1},returnTrue=function(){return!0};Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,preventDefault:function(){this.isDefaultPrevented=returnTrue},stopPropagation:function(){this.isPropagationStopped=returnTrue}},gmu.event={on:function(name,callback,context){var set,me=this;return callback?(set=this._events||(this._events=[]),eachEvent(name,callback,function(name,callback){var handler=parse(name);handler.cb=callback,handler.ctx=context,handler.ctx2=context||me,handler.id=set.length,set.push(handler)}),this):this},one:function(name,callback,context){var me=this;return callback?(eachEvent(name,callback,function(name,callback){var once=function(){return me.off(name,once),callback.apply(context||me,arguments)};once._cb=callback,me.on(name,once,context)}),this):this},off:function(name,callback,context){var events=this._events;return events?name||callback||context?(eachEvent(name,callback,function(name,callback){findHandlers(events,name,callback,context).forEach(function(handler){delete events[handler.id]})}),this):(this._events=[],this):this},trigger:function(evt){var args,events,stoped,len,ev,i=-1;if(!this._events||!evt)return this;if("string"==typeof evt&&(evt=new Event(evt)),args=slice.call(arguments,1),evt.args=args,args.unshift(evt),events=findHandlers(this._events,evt.type))for(len=events.length;++i<len;)if((stoped=evt.isPropagationStopped())||!1===(ev=events[i]).cb.apply(ev.ctx2,args)){stoped||(evt.stopPropagation(),evt.preventDefault());break}return this}},gmu.Event=Event}(gmu,gmu.$);
!function(gmu,$,undefined){function isPlainObject(obj){return"[object Object]"===toString.call(obj)}function eachObject(obj,iterator){obj&&Object.keys(obj).forEach(function(key){iterator(key,obj[key])})}function parseData(data){try{data="true"===data?!0:"false"===data?!1:"null"===data?null:+data+""===data?+data:/(?:\{[\s\S]*\}|\[[\s\S]*\])$/.test(data)?JSON.parse(data):data}catch(ex){data=undefined}return data}function getDomOptions(el){for(var key,data,ret={},attrs=el&&el.attributes,len=attrs&&attrs.length;len--;)data=attrs[len],key=data.name,"data-"===key.substring(0,5)&&(key=key.substring(5),data=parseData(data.value),data===undefined||(ret[key]=data));return ret}function zeptolize(name){var key=name.substring(0,1).toLowerCase()+name.substring(1),old=$.fn[key];$.fn[key]=function(opts){var ret,obj,args=slice.call(arguments,1),method="string"==typeof opts&&opts;return $.each(this,function(i,el){if(obj=record(el,name)||new gmu[name](el,isPlainObject(opts)?opts:undefined),"this"===method)return ret=obj,!1;if(method){if(!$.isFunction(obj[method]))throw new Error("组件没有此方法："+method);if(ret=obj[method].apply(obj,args),ret!==undefined&&ret!==obj)return!1;ret=undefined}}),ret!==undefined?ret:this},$.fn[key].noConflict=function(){return $.fn[key]=old,this}}function loadOption(klass,opts){var me=this;klass.superClass&&loadOption.call(me,klass.superClass,opts),eachObject(record(klass,"options"),function(key,option){option.forEach(function(item){var condition=item[0],fn=item[1];("*"===condition||$.isFunction(condition)&&condition.call(me,opts[key])||condition===opts[key])&&fn.call(me)})})}function loadPlugins(klass,opts){var me=this;klass.superClass&&loadPlugins.call(me,klass.superClass,opts),eachObject(record(klass,"plugins"),function(opt,plugin){opts[opt]!==!1&&(eachObject(plugin,function(key,val){var oringFn;me[key]=$.isFunction(val)&&(oringFn=me[key])?function(){var ret,origin=me.origin;return me.origin=oringFn,ret=val.apply(me,arguments),origin===undefined?delete me.origin:me.origin=origin,ret}:val}),plugin._init.call(me))})}function mergeObj(){for(var last,args=slice.call(arguments),i=args.length;i--;)last=last||args[i],isPlainObject(args[i])||args.splice(i,1);return args.length?$.extend.apply(null,[!0,{}].concat(args)):last}function bootstrap(name,klass,uid,el,options){var opts,me=this;return isPlainObject(el)&&(options=el,el=undefined),options&&options.el&&(el=$(options.el)),el&&(me.$el=$(el),el=me.$el[0]),opts=me._options=mergeObj(klass.options,getDomOptions(el),options),me.template=mergeObj(klass.template,opts.template),me.tpl2html=mergeObj(klass.tpl2html,opts.tpl2html),me.widgetName=name.toLowerCase(),me.eventNs="."+me.widgetName+uid,me._init(opts),me._options.setup=me.$el&&me.$el.parent()[0]?!0:!1,loadOption.call(me,klass,opts),loadPlugins.call(me,klass,opts),me._create(),me.trigger("ready"),el&&record(el,name,me)&&me.on("destroy",function(){record(el,name,null)}),me}function createClass(name,object,superClass){function klass(el,options){if("Base"===name)throw new Error("Base类不能直接实例化");return this instanceof klass?bootstrap.call(this,name,klass,uuid++,el,options):new klass(el,options)}"function"!=typeof superClass&&(superClass=gmu.Base);var uuid=1,suid=1;return $.extend(klass,{register:function(name,obj){var plugins=record(klass,"plugins")||record(klass,"plugins",{});return obj._init=obj._init||blankFn,plugins[name]=obj,klass},option:function(option,value,method){var options=record(klass,"options")||record(klass,"options",{});return options[option]||(options[option]=[]),options[option].push([value,method]),klass},inherits:function(obj){return createClass(name+"Sub"+suid++,obj,klass)},extend:function(obj){var proto=klass.prototype,superProto=superClass.prototype;staticlist.forEach(function(item){obj[item]=mergeObj(superClass[item],obj[item]),obj[item]&&(klass[item]=obj[item]),delete obj[item]}),eachObject(obj,function(key,val){proto[key]="function"==typeof val&&superProto[key]?function(){var ret,$super=this.$super;return this.$super=function(){var args=slice.call(arguments,1);return superProto[key].apply(this,args)},ret=val.apply(this,arguments),$super===undefined?delete this.$super:this.$super=$super,ret}:val})}}),klass.superClass=superClass,klass.prototype=Object.create(superClass.prototype),klass.extend(object),klass}var slice=[].slice,toString=Object.prototype.toString,blankFn=function(){},staticlist=["options","template","tpl2html"],record=function(){var data={},id=0,ikey="_gid";return function(obj,key,val){var dkey=obj[ikey]||(obj[ikey]=++id),store=data[dkey]||(data[dkey]={});return val!==undefined&&(store[key]=val),null===val&&delete store[key],store[key]}}(),event=gmu.event;gmu.define=function(name,object,superClass){gmu[name]=createClass(name,object,superClass),zeptolize(name)},gmu.isWidget=function(obj,klass){return klass="string"==typeof klass?gmu[klass]||blankFn:klass,klass=klass||gmu.Base,obj instanceof klass},gmu.Base=createClass("Base",{_init:blankFn,_create:blankFn,getEl:function(){return this.$el},on:event.on,one:event.one,off:event.off,trigger:function(name){var evt="string"==typeof name?new gmu.Event(name):name,args=[evt].concat(slice.call(arguments,1)),opEvent=this._options[evt.type],$el=this.getEl();return opEvent&&$.isFunction(opEvent)&&!1===opEvent.apply(this,args)&&(evt.stopPropagation(),evt.preventDefault()),event.trigger.apply(this,args),$el&&$el.triggerHandler(evt,(args.shift(),args)),this},tpl2html:function(subpart,data){var tpl=this.template;return tpl="string"==typeof subpart?tpl[subpart]:(data=subpart,tpl),data||~tpl.indexOf("<%")?$.parseTpl(tpl,data):tpl},destroy:function(){this.$el&&this.$el.off(this.eventNs),this.trigger("destroy"),this.off(),this.destroyed=!0}},Object),$.ui=gmu}(gmu,gmu.$);
!function($){var pedding=[];$.fn.imglazyload=function(opts){function isInViewport(offset){var viewOffset=isWindow?window:$viewPort.offset(),viewTop=viewOffset[OFFSET.win[0]],viewHeight=viewOffset[OFFSET.win[1]];return viewTop>=offset[OFFSET.img[0]]-opts.threshold-viewHeight&&viewTop<=offset[OFFSET.img[0]]+offset[OFFSET.img[1]]}function _load(div){var $div=$(div),attrObj={},$img=$div;isImg||($.each($div.get(0).attributes,function(){~this.name.indexOf("data-")&&(attrObj[this.name]=this.value)}),$img=$("<img />").attr(attrObj)),$div.trigger("startload"),$img.on("load",function(){!isImg&&$div.replaceWith($img),$div.trigger("loadcomplete"),$img.off("load")}).on("error",function(){var errorEvent=$.Event("error");$div.trigger(errorEvent),errorEvent.defaultPrevented||pedding.push(div),$img.off("error").remove()}).attr("src",$div.attr(opts.urlName))}function _detect(){var i,$image,offset,div;for(i=pedding.length;i--;)$image=$(div=pedding[i]),offset=$image.offset(),isInViewport(offset)&&(splice.call(pedding,i,1),_load(div))}function _addPlsHolder(){!isImg&&$plsHolder&&$(pedding).append($plsHolder)}var splice=Array.prototype.splice,opts=$.extend({threshold:0,container:window,urlName:"data-url",placeHolder:"",eventName:"scrollStop",innerScroll:!1,isVertical:!0},opts),$viewPort=$(opts.container),isVertical=opts.isVertical,isWindow=$.isWindow($viewPort.get(0)),OFFSET={win:[isVertical?"scrollY":"scrollX",isVertical?"innerHeight":"innerWidth"],img:[isVertical?"top":"left",isVertical?"height":"width"]},$plsHolder=$(opts.placeHolder).length?$(opts.placeHolder):null,isImg=$(this).is("img");return!isWindow&&(OFFSET.win=OFFSET.img),pedding=Array.prototype.slice.call($(pedding.reverse()).add(this),0).reverse(),$.isFunction($.fn.imglazyload.detect)?(_addPlsHolder(),this):($(document).ready(function(){_addPlsHolder(),_detect()}),!opts.innerScroll&&$(window).on(opts.eventName+" ortchange",function(){_detect()}),$.fn.imglazyload.detect=_detect,this)}}(Zepto);
!function($){function parentIfText(node){return"tagName"in node?node:node.parentNode}function swipeDirection(x1,x2,y1,y2){var xDelta=Math.abs(x1-x2),yDelta=Math.abs(y1-y2);return xDelta>=yDelta?x1-x2>0?"Left":"Right":y1-y2>0?"Up":"Down"}function longTap(){longTapTimeout=null,touch.last&&(touch.el.trigger("longTap"),touch={})}function cancelLongTap(){longTapTimeout&&clearTimeout(longTapTimeout),longTapTimeout=null}function cancelAll(){touchTimeout&&clearTimeout(touchTimeout),tapTimeout&&clearTimeout(tapTimeout),swipeTimeout&&clearTimeout(swipeTimeout),longTapTimeout&&clearTimeout(longTapTimeout),touchTimeout=tapTimeout=swipeTimeout=longTapTimeout=null,touch={}}var touchTimeout,tapTimeout,swipeTimeout,longTapTimeout,touch={},longTapDelay=750;$(document).ready(function(){var now,delta;$(document.body).bind("touchstart",function(e){now=Date.now(),delta=now-(touch.last||now),touch.el=$(parentIfText(e.touches[0].target)),touchTimeout&&clearTimeout(touchTimeout),touch.x1=e.touches[0].pageX,touch.y1=e.touches[0].pageY,delta>0&&250>=delta&&(touch.isDoubleTap=!0),touch.last=now,longTapTimeout=setTimeout(longTap,longTapDelay)}).bind("touchmove",function(e){cancelLongTap(),touch.x2=e.touches[0].pageX,touch.y2=e.touches[0].pageY,Math.abs(touch.x1-touch.x2)>10&&e.preventDefault()}).bind("touchend",function(){cancelLongTap(),touch.x2&&Math.abs(touch.x1-touch.x2)>30||touch.y2&&Math.abs(touch.y1-touch.y2)>30?swipeTimeout=setTimeout(function(){touch.el.trigger("swipe"),touch.el.trigger("swipe"+swipeDirection(touch.x1,touch.x2,touch.y1,touch.y2)),touch={}},0):"last"in touch&&(tapTimeout=setTimeout(function(){var event=$.Event("tap");event.cancelTouch=cancelAll,touch.el.trigger(event),touch.isDoubleTap?(touch.el.trigger("doubleTap"),touch={}):touchTimeout=setTimeout(function(){touchTimeout=null,touch.el.trigger("singleTap"),touch={}},250)},0))}).bind("touchcancel",cancelAll),$(window).bind("scroll",cancelAll)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(m){$.fn[m]=function(callback){return this.bind(m,callback)}})}(Zepto);
!function($){$.matchMedia=function(){var mediaId=0,cls="gmu-media-detect",transitionEnd=$.fx.transitionEnd,cssPrefix=$.fx.cssPrefix,$style=$("<style></style>").append("."+cls+"{"+cssPrefix+"transition: width 0.001ms; width: 0; position: absolute; clip: rect(1px, 1px, 1px, 1px);}\n").appendTo("head");return function(query){var $mediaElem,ret,id=cls+mediaId++,listeners=[];return $style.append("@media "+query+" { #"+id+" { width: 1px; } }\n"),$mediaElem=$('<div class="'+cls+'" id="'+id+'"></div>').appendTo("body").on(transitionEnd,function(){ret.matches=1===$mediaElem.width(),$.each(listeners,function(i,fn){$.isFunction(fn)&&fn.call(ret,ret)})}),ret={matches:1===$mediaElem.width(),media:query,addListener:function(callback){return listeners.push(callback),this},removeListener:function(callback){var index=listeners.indexOf(callback);return~index&&listeners.splice(index,1),this}}}}()}(Zepto);
$(function(){$.mediaQuery={ortchange:"screen and (width: "+window.innerWidth+"px)"},$.matchMedia($.mediaQuery.ortchange).addListener(function(){$(window).trigger("ortchange")})});
!function($){$.parseTpl=function(str,data){var tmpl="var __p=[];with(obj||{}){__p.push('"+str.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/<%=([\s\S]+?)%>/g,function(match,code){return"',"+code.replace(/\\'/,"'")+",'"}).replace(/<%([\s\S]+?)%>/g,function(match,code){return"');"+code.replace(/\\'/,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+'\');}return __p.join("");',func=new Function("obj",tmpl);return data?func(data):func}}(Zepto);
/*!
 * iScroll v4.2.2 ~ Copyright (c) 2012 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */
!function(window,doc){function prefixStyle(style){return""===vendor?style:(style=style.charAt(0).toUpperCase()+style.substr(1),vendor+style)}var m=Math,_bindArr=[],dummyStyle=doc.createElement("div").style,vendor=function(){for(var t,vendors="webkitT,MozT,msT,OT,t".split(","),i=0,l=vendors.length;l>i;i++)if(t=vendors[i]+"ransform",t in dummyStyle)return vendors[i].substr(0,vendors[i].length-1);return!1}(),cssVendor=vendor?"-"+vendor.toLowerCase()+"-":"",transform=prefixStyle("transform"),transitionProperty=prefixStyle("transitionProperty"),transitionDuration=prefixStyle("transitionDuration"),transformOrigin=prefixStyle("transformOrigin"),transitionTimingFunction=prefixStyle("transitionTimingFunction"),isAndroid=(prefixStyle("transitionDelay"),/android/gi.test(navigator.appVersion)),isTouchPad=/hp-tablet/gi.test(navigator.appVersion),has3d=prefixStyle("perspective")in dummyStyle,hasTouch="ontouchstart"in window&&!isTouchPad,hasTransform=!!vendor,hasTransitionEnd=prefixStyle("transition")in dummyStyle,RESIZE_EV="onorientationchange"in window?"orientationchange":"resize",START_EV=hasTouch?"touchstart":"mousedown",MOVE_EV=hasTouch?"touchmove":"mousemove",END_EV=hasTouch?"touchend":"mouseup",CANCEL_EV=hasTouch?"touchcancel":"mouseup",TRNEND_EV=function(){if(vendor===!1)return!1;var transitionEnd={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return transitionEnd[vendor]}(),nextFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){return setTimeout(callback,1)}}(),cancelFrame=function(){return window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),translateZ=has3d?" translateZ(0)":"",iScroll=function(el,options){var i,that=this;that.wrapper="object"==typeof el?el:doc.getElementById(el),that.wrapper.style.overflow="hidden",that.scroller=that.wrapper.children[0],that.translateZ=translateZ,that.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,onRefresh:null,onBeforeScrollStart:function(e){e.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null};for(i in options)that.options[i]=options[i];that.x=that.options.x,that.y=that.options.y,that.options.useTransform=hasTransform&&that.options.useTransform,that.options.useTransition=hasTransitionEnd&&that.options.useTransition,that.scroller.style[transitionProperty]=that.options.useTransform?cssVendor+"transform":"top left",that.scroller.style[transitionDuration]="0",that.scroller.style[transformOrigin]="0 0",that.options.useTransition&&(that.scroller.style[transitionTimingFunction]="cubic-bezier(0.33,0.66,0.66,1)"),that.options.useTransform?that.scroller.style[transform]="translate("+that.x+"px,"+that.y+"px)"+translateZ:that.scroller.style.cssText+=";position:absolute;top:"+that.y+"px;left:"+that.x+"px",that.refresh(),that._bind(RESIZE_EV,window),that._bind(START_EV),that.options.checkDOMChanges&&(that.checkDOMTime=setInterval(function(){that._checkDOMChanges()},500))};iScroll.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,isStopScrollAction:!1,handleEvent:function(e){var that=this;switch(e.type){case START_EV:if(!hasTouch&&0!==e.button)return;that._start(e);break;case MOVE_EV:that._move(e);break;case END_EV:case CANCEL_EV:that._end(e);break;case RESIZE_EV:that._resize();break;case TRNEND_EV:that._transitionEnd(e)}},_checkDOMChanges:function(){this.moved||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale||this.refresh()},_resize:function(){var that=this;setTimeout(function(){that.refresh()},isAndroid?200:0)},_pos:function(x,y){x=this.hScroll?x:0,y=this.vScroll?y:0,this.options.useTransform?this.scroller.style[transform]="translate("+x+"px,"+y+"px) scale("+this.scale+")"+translateZ:(x=m.round(x),y=m.round(y),this.scroller.style.left=x+"px",this.scroller.style.top=y+"px"),this.x=x,this.y=y},_start:function(e){var matrix,x,y,that=this,point=hasTouch?e.touches[0]:e;that.enabled&&(that.options.onBeforeScrollStart&&that.options.onBeforeScrollStart.call(that,e),that.options.useTransition&&that._transitionTime(0),that.moved=!1,that.animating=!1,that.distX=0,that.distY=0,that.absDistX=0,that.absDistY=0,that.dirX=0,that.dirY=0,that.isStopScrollAction=!1,that.options.momentum&&(that.options.useTransform?(matrix=getComputedStyle(that.scroller,null)[transform].replace(/[^0-9\-.,]/g,"").split(","),x=+matrix[4],y=+matrix[5]):(x=+getComputedStyle(that.scroller,null).left.replace(/[^0-9-]/g,""),y=+getComputedStyle(that.scroller,null).top.replace(/[^0-9-]/g,"")),(m.round(x)!=m.round(that.x)||m.round(y)!=m.round(that.y))&&(that.isStopScrollAction=!0,that.options.useTransition?that._unbind(TRNEND_EV):cancelFrame(that.aniTime),that.steps=[],that._pos(x,y),that.options.onScrollEnd&&that.options.onScrollEnd.call(that))),that.startX=that.x,that.startY=that.y,that.pointX=point.pageX,that.pointY=point.pageY,that.startTime=e.timeStamp||Date.now(),that.options.onScrollStart&&that.options.onScrollStart.call(that,e),that._bind(MOVE_EV,window),that._bind(END_EV,window),that._bind(CANCEL_EV,window))},_move:function(e){var that=this,point=hasTouch?e.touches[0]:e,deltaX=point.pageX-that.pointX,deltaY=point.pageY-that.pointY,newX=that.x+deltaX,newY=that.y+deltaY,timestamp=e.timeStamp||Date.now();that.options.onBeforeScrollMove&&that.options.onBeforeScrollMove.call(that,e),that.pointX=point.pageX,that.pointY=point.pageY,(newX>0||newX<that.maxScrollX)&&(newX=that.options.bounce?that.x+deltaX/2:newX>=0||that.maxScrollX>=0?0:that.maxScrollX),(newY>that.minScrollY||newY<that.maxScrollY)&&(newY=that.options.bounce?that.y+deltaY/2:newY>=that.minScrollY||that.maxScrollY>=0?that.minScrollY:that.maxScrollY),that.distX+=deltaX,that.distY+=deltaY,that.absDistX=m.abs(that.distX),that.absDistY=m.abs(that.distY),that.absDistX<6&&that.absDistY<6||(that.options.lockDirection&&(that.absDistX>that.absDistY+5?(newY=that.y,deltaY=0):that.absDistY>that.absDistX+5&&(newX=that.x,deltaX=0)),that.moved=!0,that._beforePos?that._beforePos(newY,deltaY)&&that._pos(newX,newY):that._pos(newX,newY),that.dirX=deltaX>0?-1:0>deltaX?1:0,that.dirY=deltaY>0?-1:0>deltaY?1:0,timestamp-that.startTime>300&&(that.startTime=timestamp,that.startX=that.x,that.startY=that.y),that.options.onScrollMove&&that.options.onScrollMove.call(that,e))},_end:function(e){if(!hasTouch||0===e.touches.length){var target,ev,newDuration,that=this,point=hasTouch?e.changedTouches[0]:e,momentumX={dist:0,time:0},momentumY={dist:0,time:0},duration=(e.timeStamp||Date.now())-that.startTime,newPosX=that.x,newPosY=that.y;if(that._unbind(MOVE_EV,window),that._unbind(END_EV,window),that._unbind(CANCEL_EV,window),that.options.onBeforeScrollEnd&&that.options.onBeforeScrollEnd.call(that,e),!that.moved)return hasTouch&&this.options.handleClick&&!that.isStopScrollAction&&(that.doubleTapTimer=setTimeout(function(){for(that.doubleTapTimer=null,target=point.target;1!=target.nodeType;)target=target.parentNode;"SELECT"!=target.tagName&&"INPUT"!=target.tagName&&"TEXTAREA"!=target.tagName&&(ev=doc.createEvent("MouseEvents"),ev.initMouseEvent("click",!0,!0,e.view,1,point.screenX,point.screenY,point.clientX,point.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),ev._fake=!0,target.dispatchEvent(ev))},0)),that._resetPos(400),void(that.options.onTouchEnd&&that.options.onTouchEnd.call(that,e));if(300>duration&&that.options.momentum&&(momentumX=newPosX?that._momentum(newPosX-that.startX,duration,-that.x,that.scrollerW-that.wrapperW+that.x,that.options.bounce?that.wrapperW:0):momentumX,momentumY=newPosY?that._momentum(newPosY-that.startY,duration,-that.y,that.maxScrollY<0?that.scrollerH-that.wrapperH+that.y-that.minScrollY:0,that.options.bounce?that.wrapperH:0):momentumY,newPosX=that.x+momentumX.dist,newPosY=that.y+momentumY.dist,(that.x>0&&newPosX>0||that.x<that.maxScrollX&&newPosX<that.maxScrollX)&&(momentumX={dist:0,time:0}),(that.y>that.minScrollY&&newPosY>that.minScrollY||that.y<that.maxScrollY&&newPosY<that.maxScrollY)&&(momentumY={dist:0,time:0})),momentumX.dist||momentumY.dist)return newDuration=m.max(m.max(momentumX.time,momentumY.time),10),that.scrollTo(m.round(newPosX),m.round(newPosY),newDuration),void(that.options.onTouchEnd&&that.options.onTouchEnd.call(that,e));that._resetPos(200),that.options.onTouchEnd&&that.options.onTouchEnd.call(that,e)}},_resetPos:function(time){var that=this,resetX=that.x>=0?0:that.x<that.maxScrollX?that.maxScrollX:that.x,resetY=that.y>=that.minScrollY||that.maxScrollY>0?that.minScrollY:that.y<that.maxScrollY?that.maxScrollY:that.y;return resetX==that.x&&resetY==that.y?void(that.moved&&(that.moved=!1,that.options.onScrollEnd&&that.options.onScrollEnd.call(that),that._afterPos&&that._afterPos())):void that.scrollTo(resetX,resetY,time||0)},_transitionEnd:function(e){var that=this;e.target==that.scroller&&(that._unbind(TRNEND_EV),that._startAni())},_startAni:function(){var step,easeOut,animate,that=this,startX=that.x,startY=that.y,startTime=Date.now();if(!that.animating){if(!that.steps.length)return void that._resetPos(400);if(step=that.steps.shift(),step.x==startX&&step.y==startY&&(step.time=0),that.animating=!0,that.moved=!0,that.options.useTransition)return that._transitionTime(step.time),that._pos(step.x,step.y),that.animating=!1,void(step.time?that._bind(TRNEND_EV):that._resetPos(0));animate=function(){var newX,newY,now=Date.now();return now>=startTime+step.time?(that._pos(step.x,step.y),that.animating=!1,that.options.onAnimationEnd&&that.options.onAnimationEnd.call(that),void that._startAni()):(now=(now-startTime)/step.time-1,easeOut=m.sqrt(1-now*now),newX=(step.x-startX)*easeOut+startX,newY=(step.y-startY)*easeOut+startY,that._pos(newX,newY),void(that.animating&&(that.aniTime=nextFrame(animate))))},animate()}},_transitionTime:function(time){time+="ms",this.scroller.style[transitionDuration]=time},_momentum:function(dist,time,maxDistUpper,maxDistLower,size){var deceleration=6e-4,speed=m.abs(dist)*(this.options.speedScale||1)/time,newDist=speed*speed/(2*deceleration),newTime=0,outsideDist=0;return dist>0&&newDist>maxDistUpper?(outsideDist=size/(6/(newDist/speed*deceleration)),maxDistUpper+=outsideDist,speed=speed*maxDistUpper/newDist,newDist=maxDistUpper):0>dist&&newDist>maxDistLower&&(outsideDist=size/(6/(newDist/speed*deceleration)),maxDistLower+=outsideDist,speed=speed*maxDistLower/newDist,newDist=maxDistLower),newDist*=0>dist?-1:1,newTime=speed/deceleration,{dist:newDist,time:m.round(newTime)}},_offset:function(el){for(var left=-el.offsetLeft,top=-el.offsetTop;el=el.offsetParent;)left-=el.offsetLeft,top-=el.offsetTop;return el!=this.wrapper&&(left*=this.scale,top*=this.scale),{left:left,top:top}},_bind:function(type,el,bubble){_bindArr.concat([el||this.scroller,type,this]),(el||this.scroller).addEventListener(type,this,!!bubble)},_unbind:function(type,el,bubble){(el||this.scroller).removeEventListener(type,this,!!bubble)},destroy:function(){var that=this;that.scroller.style[transform]="",that._unbind(RESIZE_EV,window),that._unbind(START_EV),that._unbind(MOVE_EV,window),that._unbind(END_EV,window),that._unbind(CANCEL_EV,window),that.options.useTransition&&that._unbind(TRNEND_EV),that.options.checkDOMChanges&&clearInterval(that.checkDOMTime),that.options.onDestroy&&that.options.onDestroy.call(that);for(var i=0,l=_bindArr.length;l>i;)_bindArr[i].removeEventListener(_bindArr[i+1],_bindArr[i+2]),_bindArr[i]=null,i+=3;_bindArr=[]},refresh:function(){var offset,that=this;that.wrapperW=that.wrapper.clientWidth||1,that.wrapperH=that.wrapper.clientHeight||1,that.minScrollY=-that.options.topOffset||0,that.scrollerW=m.round(that.scroller.offsetWidth*that.scale),that.scrollerH=m.round((that.scroller.offsetHeight+that.minScrollY)*that.scale),that.maxScrollX=that.wrapperW-that.scrollerW,that.maxScrollY=that.wrapperH-that.scrollerH+that.minScrollY,that.dirX=0,that.dirY=0,that.options.onRefresh&&that.options.onRefresh.call(that),that.hScroll=that.options.hScroll&&that.maxScrollX<0,that.vScroll=that.options.vScroll&&(!that.options.bounceLock&&!that.hScroll||that.scrollerH>that.wrapperH),offset=that._offset(that.wrapper),that.wrapperOffsetLeft=-offset.left,that.wrapperOffsetTop=-offset.top,that.scroller.style[transitionDuration]="0",that._resetPos(400)},scrollTo:function(x,y,time,relative){var i,l,that=this,step=x;for(that.stop(),step.length||(step=[{x:x,y:y,time:time,relative:relative}]),i=0,l=step.length;l>i;i++)step[i].relative&&(step[i].x=that.x-step[i].x,step[i].y=that.y-step[i].y),that.steps.push({x:step[i].x,y:step[i].y,time:step[i].time||0});that._startAni()},scrollToElement:function(el,time){var pos,that=this;el=el.nodeType?el:that.scroller.querySelector(el),el&&(pos=that._offset(el),pos.left+=that.wrapperOffsetLeft,pos.top+=that.wrapperOffsetTop,pos.left=pos.left>0?0:pos.left<that.maxScrollX?that.maxScrollX:pos.left,pos.top=pos.top>that.minScrollY?that.minScrollY:pos.top<that.maxScrollY?that.maxScrollY:pos.top,time=void 0===time?m.max(2*m.abs(pos.left),2*m.abs(pos.top)):time,that.scrollTo(pos.left,pos.top,time))},scrollToPage:function(pageX,pageY,time){var x,y,that=this;time=void 0===time?400:time,that.options.onScrollStart&&that.options.onScrollStart.call(that),x=-that.wrapperW*pageX,y=-that.wrapperH*pageY,x<that.maxScrollX&&(x=that.maxScrollX),y<that.maxScrollY&&(y=that.maxScrollY),that.scrollTo(x,y,time)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(MOVE_EV,window),this._unbind(END_EV,window),this._unbind(CANCEL_EV,window)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(TRNEND_EV):cancelFrame(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},isReady:function(){return!this.moved&&!this.animating}},dummyStyle=null,"undefined"!=typeof exports?exports.iScroll=iScroll:window.iScroll=iScroll,function($,ns,undefined){if($){var iScroll,_iScroll=ns.iScroll,slice=[].slice,record=function(){var data={},id=0,ikey="_sid";return function(obj,val){var key=obj[ikey]||(obj[ikey]=++id);return val!==undefined&&(data[key]=val),null===val&&delete data[key],data[key]}}();ns.iScroll=iScroll=function(el,options){var ins=([].slice.call(arguments,0),new _iScroll(el,options));return record(el,ins),ins},iScroll.prototype=_iScroll.prototype,$.fn.iScroll=function(opts){var ret,obj,args=slice.call(arguments,1),method="string"==typeof opts&&opts;return $.each(this,function(i,el){if(obj=record(el)||iScroll(el,$.isPlainObject(opts)?opts:undefined),"this"===method)return ret=obj,!1;if(method){if(!$.isFunction(obj[method]))throw new Error("iScroll没有此方法："+method);if(ret=obj[method].apply(obj,args),ret!==undefined&&ret!==obj)return!1;ret=undefined}}),ret!==undefined?ret:this}}}(window.Zepto||null,window)}(window,document);
!function($,undefined){$.extend($.fn,{fix:function(opts){var me=this;if(me.attr("isFixed"))return me;me.css(opts).css("position","fixed").attr("isFixed",!0);var buff=$('<div style="position:fixed;top:10px;"></div>').appendTo("body"),top=buff[0].getBoundingClientRect().top,checkFixed=function(){window.pageYOffset>0&&(buff[0].getBoundingClientRect().top!==top&&(me.css("position","absolute"),doFixed(),$(window).on("scrollStop",doFixed),$(window).on("ortchange",doFixed)),$(window).off("scrollStop",checkFixed),buff.remove())},doFixed=function(){me.css({top:window.pageYOffset+(opts.bottom!==undefined?window.innerHeight-me.height()-opts.bottom:opts.top||0),left:opts.right!==undefined?document.body.offsetWidth-me.width()-opts.right:opts.left||0}),"100%"==opts.width&&me.css("width",document.body.offsetWidth)};return $(window).on("scrollStop",checkFixed),me}})}(Zepto);
!function($){$.extend($,{throttle:function(delay,fn,debounce_mode){function wrapper(){function exec(){last=Date.now(),fn.apply(that,args)}function clear(){timeId=void 0}var that=this,period=Date.now()-last,args=arguments;debounce_mode&&!timeId&&exec(),timeId&&clearTimeout(timeId),void 0===debounce_mode&&period>delay?exec():timeId=setTimeout(debounce_mode?clear:exec,void 0===debounce_mode?delay-period:delay)}var timeId,last=0;return"function"!=typeof fn&&(debounce_mode=fn,fn=delay,delay=250),wrapper._zid=fn._zid=fn._zid||$.proxy(fn)._zid,wrapper},debounce:function(delay,fn,t){return void 0===fn?$.throttle(250,delay,!1):$.throttle(delay,fn,void 0===t?!1:t!==!1)}})}(Zepto);
!function($,win){function registerScrollStop(){$(win).on("scroll",$.debounce(80,function(){$(win).trigger("scrollStop")},!1))}function backEventOffHandler(){$(win).off("scroll"),registerScrollStop()}registerScrollStop(),$(win).on("pageshow",function(e){e.persisted&&$(win).off("touchstart",backEventOffHandler).one("touchstart",backEventOffHandler)})}(Zepto,window);
!function(gmu,$){var cssPrefix=$.fx.cssPrefix,transitionEnd=$.fx.transitionEnd,translateZ=" translateZ(0)";gmu.define("Slider",{options:{loop:!1,speed:400,index:0,selector:{container:".ui-slider-group"}},template:{item:'<div class="ui-slider-item"><a href="<%= href %>"><img src="<%= pic %>" alt="" /></a><% if( title ) { %><p><%= title %></p><% } %></div>'},_create:function(){var me=this,$el=me.getEl(),opts=me._options;me.index=opts.index,me._initDom($el,opts),me._initWidth($el,me.index),me._container.on(transitionEnd+me.eventNs,$.proxy(me._tansitionEnd,me)),$(window).on("ortchange"+me.eventNs,function(){me._initWidth($el,me.index)})},_initDom:function($el,opts){var items,container,selector=opts.selector,viewNum=opts.viewNum||1;for(container=$el.find(selector.container),container.length||(container=$("<div></div>"),opts.content?this._createItems(container,opts.content):$el.is("ul")?(this.$el=container.insertAfter($el),container=$el,$el=this.$el):container.append($el.children()),container.appendTo($el)),(items=container.children()).length<viewNum+1&&(opts.loop=!1);opts.loop&&container.children().length<3*viewNum;)container.append(items.clone());this.length=container.children().length,this._items=(this._container=container).addClass("ui-slider-group").children().addClass("ui-slider-item").toArray(),this.trigger("done.dom",$el.addClass("ui-slider"),opts)},_createItems:function(container,items){for(var i=0,len=items.length;len>i;i++)container.append(this.tpl2html("item",items[i]))},_initWidth:function($el,index,force){var width,me=this;(force||(width=$el.width())!==me.width)&&(me.width=width,me._arrange(width,index),me.height=$el.height(),me.trigger("width.change"))},_arrange:function(width,index){var item,len,items=this._items,i=0;for(this._slidePos=new Array(items.length),len=items.length;len>i;i++)item=items[i],item.style.cssText+="width:"+width+"px;left:"+i*-width+"px;",item.setAttribute("data-index",i),this._move(i,index>i?-width:i>index?width:0,0);this._container.css("width",width*len)},_move:function(index,dist,speed,immediate){var slidePos=this._slidePos,items=this._items;slidePos[index]!==dist&&items[index]&&(this._translate(index,dist,speed),slidePos[index]=dist,immediate&&items[index].clientLeft)},_translate:function(index,dist,speed){var slide=this._items[index],style=slide&&slide.style;return style?void(style.cssText+=cssPrefix+"transition-duration:"+speed+"ms;"+cssPrefix+"transform: translate("+dist+"px, 0)"+translateZ+";"):!1},_circle:function(index,arr){var len;return arr=arr||this._items,len=arr.length,(index%len+len)%arr.length},_tansitionEnd:function(e){~~e.target.getAttribute("data-index")===this.index&&this.trigger("slideend",this.index)},_slide:function(from,diff,dir,width,speed,opts){var to,me=this;return to=me._circle(from-dir*diff),opts.loop||(dir=Math.abs(from-to)/(from-to)),this._move(to,-dir*width,0,!0),this._move(from,width*dir,speed),this._move(to,0,speed),this.index=to,this.trigger("slide",to,from)},slideTo:function(to,speed){if(this.index===to||this.index===this._circle(to))return this;var opts=this._options,index=this.index,diff=Math.abs(index-to),dir=diff/(index-to),width=this.width;return speed=speed||opts.speed,this._slide(index,diff,dir,width,speed,opts)},prev:function(){return(this._options.loop||this.index>0)&&this.slideTo(this.index-1),this},next:function(){return(this._options.loop||this.index+1<this.length)&&this.slideTo(this.index+1),this},getIndex:function(){return this.index},destroy:function(){return this._container.off(this.eventNs),$(window).off("ortchange"+this.eventNs),this.$super("destroy")}})}(gmu,gmu.$);
!function(gmu,$){$.extend(!0,gmu.Slider,{template:{prev:'<span class="ui-slider-pre"></span>',next:'<span class="ui-slider-next"></span>'},options:{arrow:!0,select:{prev:".ui-slider-pre",next:".ui-slider-next"}}}),gmu.Slider.option("arrow",!0,function(){var me=this,arr=["prev","next"];this.on("done.dom",function(e,$el,opts){var selector=opts.selector;arr.forEach(function(name){var item=$el.find(selector[name]);item.length||$el.append(item=$(me.tpl2html(name))),me["_"+name]=item})}),this.on("ready",function(){arr.forEach(function(name){me["_"+name].on("tap"+me.eventNs,function(){me[name].call(me)})})}),this.on("destroy",function(){me._prev.off(me.eventNs),me._next.off(me.eventNs)})})}(gmu,gmu.$);
!function(gmu,$){$.extend(!0,gmu.Slider,{template:{dots:'<p class="ui-slider-dots"><%= new Array( len + 1 ).join("<b></b>") %></p>'},options:{dots:!0,selector:{dots:".ui-slider-dots"}}}),gmu.Slider.option("dots",!0,function(){var updateDots=function(to,from){var dots=this._dots;"undefined"==typeof from||gmu.staticCall(dots[from%this.length],"removeClass","ui-state-active"),gmu.staticCall(dots[to%this.length],"addClass","ui-state-active")};this.on("done.dom",function(e,$el,opts){var dots=$el.find(opts.selector.dots);dots.length||(dots=this.tpl2html("dots",{len:this.length}),dots=$(dots).appendTo($el)),this._dots=dots.children().toArray()}),this.on("slide",function(e,to,from){updateDots.call(this,to,from)}),this.on("ready",function(){updateDots.call(this,this.index)})})}(gmu,gmu.$);
!function(gmu,$,undefined){var isScrolling,start,delta,moved,map={touchstart:"_onStart",touchmove:"_onMove",touchend:"_onEnd",touchcancel:"_onEnd",click:"_onClick"};$.extend(gmu.Slider.options,{stopPropagation:!1,disableScroll:!1}),gmu.Slider.register("touch",{_init:function(){var me=this,$el=me.getEl();me._handler=function(e){return me._options.stopPropagation&&e.stopPropagation(),map[e.type]&&me[map[e.type]].call(me,e)},me.on("ready",function(){$el.on("touchstart"+me.eventNs,me._handler),me._container.on("click"+me.eventNs,me._handler)})},_onClick:function(){return!moved},_onStart:function(e){if(e.touches.length>1)return!1;var num,me=this,touche=e.touches[0],opts=me._options,eventNs=me.eventNs;start={x:touche.pageX,y:touche.pageY,time:+new Date},delta={},moved=!1,isScrolling=undefined,num=opts.viewNum||1,me._move(opts.loop?me._circle(me.index-num):me.index-num,-me.width,0,!0),me._move(opts.loop?me._circle(me.index+num):me.index+num,me.width,0,!0),me.$el.on("touchmove"+eventNs+" touchend"+eventNs+" touchcancel"+eventNs,me._handler)},_onMove:function(e){if(e.touches.length>1||e.scale&&1!==e.scale)return!1;var i,len,pos,slidePos,opts=this._options,viewNum=opts.viewNum||1,touche=e.touches[0],index=this.index;if(opts.disableScroll&&e.preventDefault(),delta.x=touche.pageX-start.x,delta.y=touche.pageY-start.y,"undefined"==typeof isScrolling&&(isScrolling=Math.abs(delta.x)<Math.abs(delta.y)),!isScrolling){for(e.preventDefault(),opts.loop||(delta.x/=!index&&delta.x>0||index===this._items.length-1&&delta.x<0?Math.abs(delta.x)/this.width+1:1),slidePos=this._slidePos,i=index-viewNum,len=index+2*viewNum;len>i;i++)pos=opts.loop?this._circle(i):i,this._translate(pos,delta.x+slidePos[pos],0);moved=!0}},_onEnd:function(){if(this.$el.off("touchmove"+this.eventNs+" touchend"+this.eventNs+" touchcancel"+this.eventNs,this._handler),moved){var speed,diff,i,len,pos,me=this,opts=me._options,viewNum=opts.viewNum||1,index=me.index,slidePos=me._slidePos,duration=+new Date-start.time,absDeltaX=Math.abs(delta.x),isPastBounds=!opts.loop&&(!index&&delta.x>0||index===slidePos.length-viewNum&&delta.x<0),dir=delta.x>0?1:-1;if(250>duration?(speed=absDeltaX/duration,diff=Math.min(Math.round(speed*viewNum*1.2),viewNum)):diff=Math.round(absDeltaX/(me.perWidth||me.width)),diff&&!isPastBounds)me._slide(index,diff,dir,me.width,opts.speed,opts,!0),viewNum>1&&duration>=250&&Math.ceil(absDeltaX/me.perWidth)!==diff&&(me.index<index?me._move(me.index-1,-me.perWidth,opts.speed):me._move(me.index+viewNum,me.width,opts.speed));else for(i=index-viewNum,len=index+2*viewNum;len>i;i++)pos=opts.loop?me._circle(i):i,me._translate(pos,slidePos[pos],opts.speed)}}})}(gmu,gmu.$);
!function(gmu,$){$.extend(!0,gmu.Slider,{options:{autoPlay:!0,interval:4e3}}),gmu.Slider.register("autoplay",{_init:function(){var me=this;me.on("slideend ready",me.resume).on("destory",me.stop),me.getEl().on("touchstart"+me.eventNs,$.proxy(me.stop,me)).on("touchend"+me.eventNs,$.proxy(me.resume,me))},resume:function(){var me=this,opts=me._options;return opts.autoPlay&&!me._timer&&(me._timer=setTimeout(function(){me.slideTo(me.index+1),me._timer=null},opts.interval)),me},stop:function(){var me=this;return me._timer&&(clearTimeout(me._timer),me._timer=null),me}})}(gmu,gmu.$);
!function(gmu,$,undefined){gmu.define("Gotop",{options:{container:"",useFix:!0,useHide:!0,useAnimation:!1,position:{bottom:10,right:10},afterScroll:null},_init:function(){var $el,_eventHandler,me=this,_opts=me._options;$.os.version&&$.os.version.substr(0,3)>=7&&(_opts.position.bottom=40),me.on("ready",function(){$el=me.$el,_eventHandler=$.proxy(me._eventHandler,me),_opts.useHide&&$(document).on("touchmove",_eventHandler),$(window).on("touchend touchcancel scrollStop",_eventHandler),$(window).on("scroll ortchange",_eventHandler),$el.on("click",_eventHandler),me.on("destroy",function(){$(window).off("touchend touchcancel scrollStop",_eventHandler),$(document).off("touchmove",_eventHandler),$(window).off("scroll ortchange",_eventHandler)}),_opts.useFix&&$el.fix(_opts.position),_opts.root=$el[0]}),me.on("destroy",function(){me.$el.remove()})},_create:function(){var me=this;return me.$el||(me.$el=$("<div></div>")),me.$el.addClass("ui-gotop").append("<div></div>").appendTo(me._options.container||(me.$el.parent().length?"":document.body)),me},_eventHandler:function(e){var me=this;switch(e.type){case"touchmove":me.hide();break;case"scroll":clearTimeout(me._options._TID);break;case"touchend":case"touchcancel":clearTimeout(me._options._TID),me._options._TID=setTimeout(function(){me._check.call(me)},300);break;case"scrollStop":me._check();break;case"ortchange":me._check.call(me);break;case"click":me._scrollTo()}},_check:function(position){var me=this;return(position!==undefined?position:window.pageYOffset)>document.documentElement.clientHeight?me.show():me.hide(),me},_scrollTo:function(){var me=this,from=window.pageYOffset;return me.hide(),clearTimeout(me._options._TID),me._options.useAnimation?me._options.moveToTop=setInterval(function(){from>1?(window.scrollBy(0,-Math.min(150,from-1)),from-=150):(clearInterval(me._options.moveToTop),me.trigger("afterScroll"))},25,!0):(window.scrollTo(0,1),me.trigger("afterScroll")),me},show:function(){return this._options.root.style.display="block",this},hide:function(){return this._options.root.style.display="none",this}})}(gmu,gmu.$);
!function(gmu,$,undefined){gmu.define("Refresh",{options:{load:null,statechange:null},_init:function(){var me=this,opts=me._options;me.on("ready",function(){$.each(["up","down"],function(i,dir){var $elem=opts["$"+dir+"Elem"],elem=$elem.get(0);$elem.length&&(me._status(dir,!0),(!elem.childNodes.length||$elem.find(".ui-refresh-icon").length&&$elem.find(".ui-refresh-label").length)&&(!elem.childNodes.length&&me._createBtn(dir),opts.refreshInfo||(opts.refreshInfo={}),opts.refreshInfo[dir]={$icon:$elem.find(".ui-refresh-icon"),$label:$elem.find(".ui-refresh-label"),text:$elem.find(".ui-refresh-label").html()}),$elem.on("click",function(){me._status(dir)&&!opts._actDir&&(me._setStyle(dir,"loading"),me._loadingAction(dir,"click"))}))})}),me.on("destroy",function(){me.$el.remove()})},_create:function(){var me=this,opts=me._options,$el=me.$el;me._options.setup&&(opts.$upElem=$el.find(".ui-refresh-up"),opts.$downElem=$el.find(".ui-refresh-down"),$el.addClass("ui-refresh"))},_createBtn:function(dir){return this._options["$"+dir+"Elem"].html('<span class="ui-refresh-icon"></span><span class="ui-refresh-label">加载更多</span>'),this},_setStyle:function(dir,state){var me=this,stateChange=$.Event("statechange");return me.trigger(stateChange,me._options["$"+dir+"Elem"],state,dir),stateChange.defaultPrevented?me:me._changeStyle(dir,state)},_changeStyle:function(dir,state){var opts=this._options,refreshInfo=opts.refreshInfo[dir];switch(state){case"loaded":refreshInfo.$label.html(refreshInfo.text),refreshInfo.$icon.removeClass(),opts._actDir="";break;case"loading":refreshInfo.$label.html("加载中..."),refreshInfo.$icon.addClass("ui-loading"),opts._actDir=dir;break;case"disable":refreshInfo.$label.html("没有更多内容了")}return this},_loadingAction:function(dir,type){var me=this,opts=me._options,loadFn=opts.load;return $.isFunction(loadFn)&&loadFn.call(me,dir,type),me._status(dir,!1),me},afterDataLoading:function(dir){var me=this,dir=dir||me._options._actDir;return me._setStyle(dir,"loaded"),me._status(dir,!0),me},_status:function(dir,status){var opts=this._options;return status===undefined?opts["_"+dir+"Open"]:opts["_"+dir+"Open"]=!!status},_setable:function(able,dir,hide){var me=this,opts=me._options,dirArr=dir?[dir]:["up","down"];return $.each(dirArr,function(i,dir){var $elem=opts["$"+dir+"Elem"];$elem.length&&(able?$elem.show():hide?$elem.hide():me._setStyle(dir,"disable"),me._status(dir,able))}),me},disable:function(dir,hide){return this._setable(!1,dir,hide)},enable:function(dir){return this._setable(!0,dir)}})}(gmu,gmu.$);
!function(gmu,$){gmu.Refresh.register("lite",{_init:function(){var me=this,opts=me._options,$el=me.$el;return opts.seamless&&$(document).on("scrollStop",$.proxy(me._eventHandler,me)),$el.on("touchstart touchmove touchend touchcancel",$.proxy(me._eventHandler,me)),opts.wrapperH=$el.height(),opts.wrapperTop=$el.offset().top,opts._win=window,opts._body=document.body,me},_changeStyle:function(dir,state){var me=this,refreshInfo=me._options.refreshInfo[dir];return"beforeload"==state&&(refreshInfo.$icon.removeClass("ui-loading"),refreshInfo.$label.html("松开立即加载")),me.origin(dir,state)},_startHandler:function(e){this._options._startY=e.touches[0].pageY},_moveHandler:function(e){var me=this,opts=me._options,startY=opts._startY,movedY=startY-e.touches[0].pageY,winHeight=opts._win.innerHeight,threshold=opts.threshold||(opts.wrapperH<winHeight?opts.wrapperH/2+opts.wrapperTop||0:winHeight/2);if(me._status("down")&&!(0>movedY))return!opts._refreshing&&startY>=opts._body.scrollHeight-winHeight+threshold&&movedY>10&&(me._setStyle("down","beforeload"),opts._refreshing=!0),me},_endHandler:function(){var me=this,opts=me._options;return me._setStyle("down","loading"),me._loadingAction("down","pull"),opts._refreshing=!1,me},_eventHandler:function(e){var me=this,opts=me._options;switch(e.type){case"touchstart":me._startHandler(e);break;case"touchmove":clearTimeout(opts._endTimer),opts._endTimer=setTimeout(function(){me._endHandler()},300),me._moveHandler(e);break;case"touchend":case"touchcancel":clearTimeout(opts._endTimer),opts._refreshing&&me._endHandler();break;case"scrollStop":!opts._refreshing&&opts._win.pageYOffset>=opts._body.scrollHeight-opts._win.innerHeight+(opts.threshold||-1)&&me._endHandler()}return me}})}(gmu,gmu.$);
!function(gmu,$){var cssPrefix=$.fx.cssPrefix,transitionEnd=$.fx.transitionEnd;gmu.define("Panel",{options:{contentWrap:"",scrollMode:"follow",display:"push",position:"right",dismissible:!0,swipeClose:!0},_init:function(){var me=this,opts=me._options;me.on("ready",function(){me.displayFn=me._setDisplay(),me.$contentWrap.addClass("ui-panel-animate"),me.$el.on(transitionEnd,$.proxy(me._eventHandler,me)).hide(),opts.dismissible&&me.$panelMask.hide().on("click",$.proxy(me._eventHandler,me)),"follow"!==opts.scrollMode&&$(window).on("scrollStop",$.proxy(me._eventHandler,me)),$(window).on("ortchange",$.proxy(me._eventHandler,me))})},_create:function(){if(!this._options.setup)throw new Error("panel组件不支持create模式，请使用setup模式");var me=this,opts=me._options,$el=me.$el.addClass("ui-panel ui-panel-"+opts.position);me.panelWidth=$el.width()||0,me.$contentWrap=$(opts.contentWrap||$el.next()),opts.dismissible&&(me.$panelMask=$('<div class="ui-panel-dismiss"></div>').width(document.body.clientWidth-$el.width()).appendTo("body")||null)},_setDisplay:function(){var panelPos,contPos,me=this,$panel=me.$el,$contentWrap=me.$contentWrap,transform=cssPrefix+"transform",posData=me._transDisplayToPos(),obj={};return $.each(["push","overlay","reveal"],function(i,display){obj[display]=function(isOpen,pos,isClear){return panelPos=posData[display].panel,contPos=posData[display].cont,$panel.css(transform,"translate3d("+me._transDirectionToPos(pos,panelPos[isOpen])+"px,0,0)"),isClear||($contentWrap.css(transform,"translate3d("+me._transDirectionToPos(pos,contPos[isOpen])+"px,0,0)"),me.maskTimer=setTimeout(function(){me.$panelMask&&me.$panelMask.css(pos,$panel.width()).toggle(isOpen)},400)),me}}),obj},_initPanelPos:function(dis,pos){return this.displayFn[dis](0,pos,!0),this.$el.get(0).clientLeft,this},_transDirectionToPos:function(pos,val){return"left"===pos?val:-val},_transDisplayToPos:function(){var me=this,panelWidth=me.panelWidth;return{push:{panel:[-panelWidth,0],cont:[0,panelWidth]},overlay:{panel:[-panelWidth,0],cont:[0,0]},reveal:{panel:[0,0],cont:[0,panelWidth]}}},_setShow:function(isOpen,dis,pos){var me=this,opts=me._options,eventName=isOpen?"open":"close",beforeEvent=$.Event("before"+eventName),changed=isOpen!==me.state(),_eventBinder=isOpen?"on":"off",_eventHandler=isOpen?$.proxy(me._eventHandler,me):me._eventHandler,_dis=dis||opts.display,_pos=pos||opts.position;return me.trigger(beforeEvent,[dis,pos]),beforeEvent.isDefaultPrevented()?me:(changed&&(me._dealState(isOpen,_dis,_pos),me.displayFn[_dis](me.isOpen=Number(isOpen),_pos),opts.swipeClose&&me.$el[_eventBinder]($.camelCase("swipe-"+_pos),_eventHandler),opts.display=_dis,opts.position=_pos),me)},_dealState:function(isOpen,dis,pos){var me=this,opts=me._options,$panel=me.$el,$contentWrap=me.$contentWrap,addCls="ui-panel-"+dis+" ui-panel-"+pos,removeCls="ui-panel-"+opts.display+" ui-panel-"+opts.position+" ui-panel-animate";return isOpen&&($panel.removeClass(removeCls).addClass(addCls).show(),"fix"===opts.scrollMode&&$panel.css("top",$(window).scrollTop()),me._initPanelPos(dis,pos),"reveal"===dis?$contentWrap.addClass("ui-panel-contentWrap").on(transitionEnd,$.proxy(me._eventHandler,me)):($contentWrap.removeClass("ui-panel-contentWrap").off(transitionEnd,$.proxy(me._eventHandler,me)),$panel.addClass("ui-panel-animate")),me.$panelMask&&me.$panelMask.css({left:"auto",right:"auto",height:document.body.clientHeight})),me},_eventHandler:function(e){var me=this,opts=me._options,scrollMode=opts.scrollMode,eventName=me.state()?"open":"close";switch(e.type){case"click":case"swipeLeft":case"swipeRight":me.close();break;case"scrollStop":"fix"===scrollMode?me.$el.css("top",$(window).scrollTop()):me.close();break;case transitionEnd:me.trigger(eventName,[opts.display,opts.position]);break;case"ortchange":me.$panelMask&&me.$panelMask.css("height",document.body.clientHeight),"fix"===scrollMode&&me.$el.css("top",$(window).scrollTop())}},open:function(display,position){return this._setShow(!0,display,position)},close:function(){return this._setShow(!1)},toggle:function(display,position){return this[this.isOpen?"close":"open"](display,position)},state:function(){return!!this.isOpen},destroy:function(){return this.$panelMask&&this.$panelMask.off().remove(),this.maskTimer&&clearTimeout(this.maskTimer),this.$contentWrap.removeClass("ui-panel-animate"),$(window).off("scrollStop",this._eventHandler),$(window).off("ortchange",this._eventHandler),this.$super("destroy")}})}(gmu,gmu.$);
!function($){function dismiss(){var cls=$el.attr("hl-cls");clearTimeout(timer),$el.removeClass(cls).removeAttr("hl-cls"),$el=null,$doc.off("touchend touchmove touchcancel",dismiss)}var $el,timer,$doc=$(document);$.fn.highlight=function(className,selector){return this.each(function(){var $this=$(this);$this.css("-webkit-tap-highlight-color","rgba(255,255,255,0)").off("touchstart.hl"),className&&$this.on("touchstart.hl",function(e){var match;$el=selector?(match=$(e.target).closest(selector,this))&&match.length&&match:$this,$el&&($el.attr("hl-cls",className),timer=setTimeout(function(){$el.addClass(className)},100),$doc.on("touchend touchmove touchcancel",dismiss))})})}}(Zepto);
!function($){function setter(coord){return this.each(function(idx){var $el=$(this),coords=$.isFunction(coord)?coord.call(this,idx,$el.offset()):coord,position=$el.css("position"),pos="absolute"===position||"fixed"===position||$el.position();"relative"===position&&(pos.top-=parseFloat($el.css("top"))||-1*parseFloat($el.css("bottom"))||0,pos.left-=parseFloat($el.css("left"))||-1*parseFloat($el.css("right"))||0),parentOffset=$el.offsetParent().offset(),props={top:round(coords.top-(pos.top||0)-parentOffset.top),left:round(coords.left-(pos.left||0)-parentOffset.left)},"static"==position&&(props.position="relative"),coords.using?coords.using.call(this,props,idx):$el.css(props)})}var _offset=$.fn.offset,round=Math.round;$.fn.offset=function(corrd){return corrd?setter.call(this,corrd):_offset.call(this)}}(Zepto);
!function($){function str2int(persent,totol){return(parseInt(persent,10)||0)*(rpercent.test(persent)?totol/100:1)}function getOffsets(pos,offset,width,height){return["right"===pos[0]?width:"center"===pos[0]?width/2:0,"bottom"===pos[1]?height:"center"===pos[1]?height/2:0,str2int(offset[0],width),str2int(offset[1],height)]}function getDimensions(elem){var raw=elem[0],isEvent=raw.preventDefault;return raw=raw.touches&&raw.touches[0]||raw,9===raw.nodeType||raw===window||isEvent?{width:isEvent?0:elem.width(),height:isEvent?0:elem.height(),top:raw.pageYOffset||raw.pageY||0,left:raw.pageXOffset||raw.pageX||0}:elem.offset()}function getWithinInfo(el){var $el=$(el=el||window),dim=getDimensions($el);return el=$el[0],{$el:$el,width:dim.width,height:dim.height,scrollLeft:el.pageXOffset||el.scrollLeft,scrollTop:el.pageYOffset||el.scrollTop}}function filterOpts(opts,offsets){["my","at"].forEach(function(key){var pos=(opts[key]||"").split(" "),opt=opts[key]=["center","center"],offset=offsets[key]=[0,0];1===pos.length&&pos[rvertical.test(pos[0])?"unshift":"push"]("center"),rhorizontal.test(pos[0])&&(opt[0]=RegExp.$1)&&(offset[0]=RegExp.$2),rvertical.test(pos[1])&&(opt[1]=RegExp.$1)&&(offset[1]=RegExp.$2)})}var _position=$.fn.position,round=Math.round,rhorizontal=/^(left|center|right)([\+\-]\d+%?)?$/,rvertical=/^(top|center|bottom)([\+\-]\d+%?)?$/,rpercent=/%$/;$.fn.position=function(opts){if(!opts||!opts.of)return _position.call(this);opts=$.extend({},opts);var atOfs,target=$(opts.of),collision=opts.collision,within=collision&&getWithinInfo(opts.within),ofses={},dim=getDimensions(target),bPos={left:dim.left,top:dim.top};return target[0].preventDefault&&(opts.at="left top"),filterOpts(opts,ofses),atOfs=getOffsets(opts.at,ofses.at,dim.width,dim.height),bPos.left+=atOfs[0]+atOfs[2],bPos.top+=atOfs[1]+atOfs[3],this.each(function(){var $el=$(this),ofs=$el.offset(),pos=$.extend({},bPos),myOfs=getOffsets(opts.my,ofses.my,ofs.width,ofs.height);pos.left=round(pos.left+myOfs[2]-myOfs[0]),pos.top=round(pos.top+myOfs[3]-myOfs[1]),collision&&collision.call(this,pos,{of:dim,offset:ofs,my:opts.my,at:opts.at,within:within,$el:$el}),pos.using=opts.using,$el.offset(pos)})}}(Zepto);
!function(gmu,$,undefined){var tpl={close:'<a class="ui-dialog-close" title="关闭"><span class="ui-icon ui-icon-delete"></span></a>',mask:'<div class="ui-mask"></div>',title:'<div class="ui-dialog-title"><h3><%=title%></h3></div>',wrap:'<div class="ui-dialog"><div class="ui-dialog-content"></div><% if(btns){ %><div class="ui-dialog-btns"><% for(var i=0, length=btns.length; i<length; i++){var item = btns[i]; %><a class="ui-btn ui-btn-<%=item.index%>" data-key="<%=item.key%>"><%=item.text%></a><% } %></div><% } %></div> '};gmu.define("Dialog",{options:{autoOpen:!0,buttons:null,closeBtn:!0,mask:!0,width:300,height:"auto",title:null,content:null,scrollMove:!0,container:null,maskClick:null,position:null},getWrap:function(){return this._options._wrap},_init:function(){var btns,me=this,opts=me._options,i=0,eventHanlder=$.proxy(me._eventHandler,me),vars={};me.on("ready",function(){opts._container=$(opts.container||document.body),(opts._cIsBody=opts._container.is("body"))||opts._container.addClass("ui-dialog-container"),vars.btns=btns=[],opts.buttons&&$.each(opts.buttons,function(key){btns.push({index:++i,text:key,key:key})}),opts._mask=opts.mask?$(tpl.mask).appendTo(opts._container):null,opts._wrap=$($.parseTpl(tpl.wrap,vars)).appendTo(opts._container),opts._content=$(".ui-dialog-content",opts._wrap),opts._title=$(tpl.title),opts._close=opts.closeBtn&&$(tpl.close).highlight("ui-dialog-close-hover"),me.$el=me.$el||opts._content,me.title(opts.title),me.content(opts.content),btns.length&&$(".ui-dialog-btns .ui-btn",opts._wrap).highlight("ui-state-hover"),opts._wrap.css({width:opts.width,height:opts.height}),$(window).on("ortchange",eventHanlder),opts._wrap.on("click",eventHanlder),opts._mask&&opts._mask.on("click",eventHanlder),opts.autoOpen&&me.open()})},_create:function(){var opts=this._options;this._options.setup&&(opts.content=opts.content||this.$el.show(),opts.title=opts.title||this.$el.attr("title"))},_eventHandler:function(e){var match,wrap,fn,me=this,opts=me._options;switch(e.type){case"ortchange":this.refresh();break;case"touchmove":opts.scrollMove&&e.preventDefault();break;case"click":if(opts._mask&&($.contains(opts._mask[0],e.target)||opts._mask[0]===e.target))return me.trigger("maskClick");wrap=opts._wrap.get(0),(match=$(e.target).closest(".ui-dialog-close",wrap))&&match.length?me.close():(match=$(e.target).closest(".ui-dialog-btns .ui-btn",wrap))&&match.length&&(fn=opts.buttons[match.attr("data-key")],fn&&fn.apply(me,arguments))}},_calculate:function(){var size,$win,me=this,opts=me._options,root=document.body,ret={},isBody=opts._cIsBody,round=Math.round;return opts.mask&&(ret.mask=isBody?{width:"100%",height:Math.max(root.scrollHeight,root.clientHeight)-1}:{width:"100%",height:"100%"}),size=opts._wrap.offset(),$win=$(window),ret.wrap={left:"50%",marginLeft:-round(size.width/2)+"px",top:isBody?round($win.height()/2)+window.pageYOffset:"50%",marginTop:-round(size.height/2)+"px"},ret},refresh:function(){var ret,action,me=this,opts=me._options;return opts._isOpen&&(action=function(){ret=me._calculate(),ret.mask&&opts._mask.css(ret.mask),opts._wrap.css(ret.wrap)},$.os.ios&&document.activeElement&&/input|textarea|select/i.test(document.activeElement.tagName)?(document.body.scrollLeft=0,$.later(action,200)):action()),me},open:function(x,y){var opts=this._options;return opts._isOpen=!0,opts._wrap.css("display","block"),opts._mask&&opts._mask.css("display","block"),x!==undefined&&this.position?this.position(x,y):this.refresh(),$(document).on("touchmove",$.proxy(this._eventHandler,this)),this.trigger("open")},close:function(){var eventData,opts=this._options;return eventData=$.Event("beforeClose"),this.trigger(eventData),eventData.defaultPrevented?this:(opts._isOpen=!1,opts._wrap.css("display","none"),opts._mask&&opts._mask.css("display","none"),$(document).off("touchmove",this._eventHandler),this.trigger("close"))},title:function(value){var opts=this._options,setter=value!==undefined;return setter&&(value=(opts.title=value)?"<h3>"+value+"</h3>":value,opts._title.html(value)[value?"prependTo":"remove"](opts._wrap),opts._close&&opts._close.prependTo(opts.title?opts._title:opts._wrap)),setter?this:opts.title},content:function(val){var opts=this._options,setter=val!==undefined;return setter&&opts._content.empty().append(opts.content=val),setter?this:opts.content},destroy:function(){var opts=this._options,_eventHander=this._eventHandler;return $(window).off("ortchange",_eventHander),$(document).off("touchmove",_eventHander),opts._wrap.off("click",_eventHander).remove(),opts._mask&&opts._mask.off("click",_eventHander).remove(),opts._close&&opts._close.highlight(),this.$super("destroy")}})}(gmu,gmu.$);
!function(gmu,$){gmu.Dialog.register("position",{_init:function(){var opts=this._options;opts.position=opts.position||{of:opts.container||window,at:"center",my:"center"}},position:function(x,y){var opts=this._options;return $.isPlainObject(x)?$.extend(opts.position,x):opts.position.at="left"+(x>0?"+"+x:x)+" top"+(y>0?"+"+y:y),this.refresh()},_calculate:function(){var me=this,opts=me._options,position=opts.position,ret=me.origin();return opts._wrap.position($.extend(position,{using:function(position){ret.wrap=position}})),ret}})}(gmu,gmu.$);
!function(gmu,$,undefined){gmu.define("Navigator",{options:{content:null,event:"click"},template:{list:"<ul>",item:'<li><a<% if( href ) { %> href="<%= href %>"<% } %>><%= text %></a></li>'},_create:function(){var renderer,html,me=this,opts=me._options,$el=me.getEl(),$list=$el.find("ul").first(),name="ui-"+me.widgetName;!$list.length&&opts.content?($list=$(me.tpl2html("list")),renderer=me.tpl2html("item"),html="",opts.content.forEach(function(item){item=$.extend({href:"",text:""},"string"==typeof item?{text:item}:item),html+=renderer(item)}),$list.append(html).appendTo($el)):($el.is("ul, ol")&&($list=$el.wrap("<div>"),$el=$el.parent()),opts.index===undefined&&(opts.index=$list.find(".ui-state-active").index(),~opts.index||(opts.index=0))),me.$list=$list.addClass(name+"-list"),me.trigger("done.dom",$el.addClass(name),opts),$list.highlight("ui-state-hover","li"),$list.on(opts.event+me.eventNs,"li:not(.ui-state-disable)>a",function(e){me._switchTo($(this).parent().index(),e)}),me.index=-1,me.switchTo(opts.index)},_switchTo:function(to,e){if(to!==this.index){var cur,me=this,list=me.$list.children(),evt=gmu.Event("beforeselect",e);if(me.trigger(evt,list.get(to)),!evt.isDefaultPrevented())return cur=list.removeClass("ui-state-active").eq(to).addClass("ui-state-active"),me.index=to,me.trigger("select",to,cur[0])}},switchTo:function(to){return this._switchTo(~~to)},unselect:function(){this.index=-1,this.$list.children().removeClass("ui-state-active")},getIndex:function(){return this.index}})}(gmu,gmu.$);
!function(gmu,$,undefined){gmu.Navigator.options.isScrollToNext=!0,gmu.Navigator.option("isScrollToNext",!0,function(){var prevIndex,me=this;me.on("select",function(e,to,el){prevIndex===undefined&&(prevIndex=me.index?0:1);var listOffset,dir=to>prevIndex,target=$(el)[dir?"next":"prev"](),offset=target.offset()||$(el).offset(),within=me.$el.offset();(dir?offset.left+offset.width>within.left+within.width:offset.left<within.left)&&(listOffset=me.$list.offset(),me.$el.iScroll("scrollTo",dir?within.width-offset.left+listOffset.left-offset.width:listOffset.left-offset.left,0,400)),prevIndex=to})})}(gmu,gmu.$);
!function(gmu,$){gmu.Navigator.options.iScroll={hScroll:!0,vScroll:!1,hScrollbar:!1,vScrollbar:!1},gmu.Navigator.register("scrollable",{_init:function(){var me=this,opts=me._options;me.on("done.dom",function(){me.$list.wrap('<div class="ui-scroller"></div>'),me.trigger("init.iScroll"),me.$el.iScroll($.extend({},opts.iScroll))}),$(window).on("ortchange"+me.eventNs,$.proxy(me.refresh,me)),me.on("destroy",function(){me.$el.iScroll("destroy"),$(window).off("ortchange"+me.eventNs)})},refresh:function(){this.trigger("refresh.iScroll").$el.iScroll("refresh")}})}(gmu,gmu.$);
!function(gmu,$){gmu.Navigator.options.visibleCount=4,gmu.Navigator.option("visibleCount","*",function(){function arrage(){var ort=window.innerWidth>window.innerHeight?"landscape":"portrait",count=counts[ort],$el=me.$el;me.$list.children().width($el.width()/count),me.$list.width($el.width()/count*me.$list.children().length)}var me=this,opts=me._options,counts="number"===$.type(opts.visibleCount)?{portrait:opts.visibleCount,landscape:Math.floor(3*opts.visibleCount/2)}:opts.visibleCount;me.on("init.iScroll refresh.iScroll",arrage)})}(gmu,gmu.$);